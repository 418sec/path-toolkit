{"version":3,"names":[],"mappings":"","sources":["path-toolkit.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.PathToolkit=t()}(this,function(){\"use strict\";var e=function(e){return e}(),t=\"*\",r=\"undefined\",n=\"string\",o=\"parent\",s=\"root\",i=\"placeholder\",a=\"context\",f=\"property\",c=\"collection\",u=\"each\",l=\"singlequote\",p=\"doublequote\",h=\"call\",x=\"evalProperty\",y=function(e,r){var n=(e.indexOf(t),e.split(t,2)),o=!0;if(n[0]){if(n[0]===e)return n[0]===r;o=o&&r.substr(0,n[0].length)===n[0]}return n[1]&&(o=o&&r.substr(-1*n[1].length)===n[1]),o},d=function(e){return typeof e===r||null===e?!1:\"function\"==typeof e||\"object\"==typeof e},g=/^\\d+$/,v=function(e){return g.test(e)},w=function(e){var t;return typeof e!==n?e&&!0:(t=e.toUpperCase(),\"TRUE\"===t||\"YES\"===t||\"ON\"===t)},E=function(e,t){var r=new RegExp(e,\"g\");return e+t.replace(r,\"\\\\\"+e)+e},m=function(g){var m,C,P,A,O,b,S,j,R,k,q,D,F,T,$=this,U={},N={},V=function(){m=Object.keys(N.prefixes),C=Object.keys(N.separators),P=Object.keys(N.containers),A=P.map(function(e){return N.containers[e].closer}),O=\"\",Object.keys(N.separators).forEach(function(e){N.separators[e].exec===f&&(O=e)}),b=\"\",S=\"\",Object.keys(N.containers).forEach(function(e){N.containers[e].exec===l&&(b=e),N.containers[e].exec===p&&(S=e)}),j=\"[\\\\\\\\\"+[t].concat(m).concat(C).concat(P).join(\"\\\\\").replace(\"\\\\\"+O,\"\")+\"]\",R=new RegExp(j),k=\"[\\\\\\\\\\\\\"+[t].concat(m).concat(C).concat(P).concat(A).join(\"\\\\\")+\"]\",q=new RegExp(k,\"g\"),D=new RegExp(\"\\\\\"+k.replace(/^\\[/,\"[^\")),F=b||S?new RegExp(\"\\\\[\"+b+S+\"]\",\"g\"):\"\",T=new RegExp(\"\\\\\"+t)},Y=function(){N=N||{},N.useCache=!0,N.simple=!1,N.force=!1,N.prefixes={\"^\":{exec:o},\"~\":{exec:s},\"%\":{exec:i},\"@\":{exec:a}},N.separators={\".\":{exec:f},\",\":{exec:c},\"<\":{exec:u}},N.containers={\"[\":{closer:\"]\",exec:f},\"'\":{closer:\"'\",exec:l},'\"':{closer:'\"',exec:p},\"(\":{closer:\")\",exec:h},\"{\":{closer:\"}\",exec:x}}},z=function(e){var t=e.replace(F,\"\"),r=t.length;return 2>r?!1:t[0]===t[r-1]&&(t[0]===b||t[0]===S)},B=function(e){return z(e)?e.slice(1,-1):e},G=function(r){var o=\"\",s=!0,i=[],a=[],x={},y=0,d=\"\",g=!1,v=!1,w=\"\",E=0,m=\"\",C=\"\",P=\"\",A=[],b=0,S=0;if(N.useCache&&U[r]!==e)return U[r];if(o=r.replace(D,\"$&\".substr(1)),y=o.length,typeof r===n&&!R.test(r))return i=o.split(O),N.useCache&&(U[r]={t:i,simple:s}),{t:i,simple:s};for(E=0;y>E;E++){if(S||\"\\\\\"!==o[E]||(S=E+1,E++),o[E]===t&&(g=!0),b>0)if(!S&&o[E]===m&&m!==C.closer&&b++,!S&&o[E]===C.closer&&b--,b>0)w+=o[E];else{if(y>E+1&&N.separators[o[E+1]]&&N.separators[o[E+1]].exec===c){if(w.length&&C.exec===f)a=B(w);else if(C.exec===l||C.exec===p)a=w;else{if(a=G(w),a===e)return;a.exec=C.exec,a.doEach=v}A.push(a)}else if(A[0]){if(w.length&&C.exec===f)a=B(w);else if(C.exec===l||C.exec===p)a=w;else{if(a=G(w),a===e)return;a.exec=C.exec,a.doEach=v}A.push(a),i.push({tt:A,doEach:v}),A=[],s&=!1}else if(C.exec===f)a={t:[B(w)]},v?(i.push({w:a.t[0],mods:{},doEach:!0}),s&=!1,v=!1):(i.push(a.t[0]),s&=!0);else if(C.exec===l||C.exec===p)x.has?(d={w:w,mods:x,doEach:v},x={},s&=!1):(i.push(w),s&=!0);else{if(a=\"\"===w?{t:[],simple:!0}:G(w),a===e)return;a.exec=C.exec,a.doEach=v,i.push(a),s&=!1}w=\"\"}else if(!S&&o[E]in N.prefixes&&N.prefixes[o[E]].exec)x.has=!0,x[N.prefixes[o[E]].exec]?x[N.prefixes[o[E]].exec]++:x[N.prefixes[o[E]].exec]=1;else if(!S&&N.separators[o[E]]&&N.separators[o[E]].exec){if(P=N.separators[o[E]],!d&&(x.has||g))return;d&&(x.has||g||v)&&(d={w:d,mods:x,doEach:v},x={},s&=!1),P.exec===f||P.exec===u?(A[0]!==e?(d&&A.push(d),i.push({tt:A,doEach:v}),A=[],s&=!1):(d&&i.push(d),s&=!0),v=P.exec===u):P.exec===c&&d&&A.push(d),d=\"\",g=!1}else!S&&N.containers[o[E]]&&N.containers[o[E]].exec?(C=N.containers[o[E]],d&&(x.has||g||v)&&(\"string\"==typeof d?d={w:d,mods:x,doEach:v}:(d.mods=x,d.doEach=v),x={}),A[0]!==e?d&&A.push(d):(d&&i.push(d),s&=!0),m=o[E],d&&N.containers[m].exec!==h&&(v=!1),d=\"\",g=!1,b++):y>E&&(d+=o[E]);y>E&&E===S&&(S=0)}return S||(\"string\"==typeof d&&d&&(x.has||g||v)?(d={w:d,mods:d.mods||x,doEach:v},x={},s&=!1):d&&x.has&&(d.mods=x),A[0]!==e?(d&&A.push(d),i.push({tt:A,doEach:v}),s&=!1):(d&&i.push(d),s&=!0),0!==b)?void 0:(N.useCache&&(U[r]={t:i,simple:s}),{t:i,simple:s})},H=function(t,r,o,s,i){var a,f,c,u=o!==e,l=[],p=0,d=0,g=1,w=0,E=0,m=t,C=\"\",P=0,A=0,O=\"\",b=0,S=t,j=!1,R=0,k=\"\";if(typeof r===n)if(N.useCache&&U[r])l=U[r].t;else{if(l=G(r),l===e)return;l=l.t}else l=r.t?r.t:[r];if(p=l.length,0!==p){for(d=p-1,i?g=i.length:i=[t];m!==e&&p>b;){if(C=l[b],j=u&&b===d,typeof C===n){if(u)if(j){if(S[C]=o,S[C]!==o)return}else N.force&&\"undefined\"==typeof S[C]&&(S[C]={});f=S[C]}else if(C===e)f=void 0;else if(C.tt)if(f=[],C.doEach){if(!Array.isArray(S))return;for(E=0,A=S.length;A>E;){for(w=0,f.push([]),P=C.tt.length;P>w;){if(C.tt[w].doEach=!1,a=j?H(S[E],C.tt[w],o,s,i):\"string\"==typeof C.tt[w]?S[E][C.tt[w]]:H(S[E],C.tt[w],void 0,s,i),a===e)return;j?C.tt[w].t&&C.tt[w].exec===x?S[E][a]=o:f[E].push(a):C.tt[w].t&&C.tt[w].exec===x?f[E].push(S[E][a]):f[E].push(a),w++}E++}}else for(w=0,P=C.tt.length;P>w;){if(a=j?H(S,C.tt[w],o,s,i):\"string\"==typeof C.tt[w]?S[C.tt[w]]:H(S,C.tt[w],void 0,s,i),a===e)return;j?C.tt[w].t&&C.tt[w].exec===x?S[a]=o:f.push(a):C.tt[w].t&&C.tt[w].exec===x?f.push(S[a]):f.push(a),w++}else if(C.w){if(O=C.w,C.mods.has){if(C.mods.parent&&(S=i[g-1-C.mods.parent],S===e))return;if(C.mods.root&&(S=i[0],i=[S],g=1),C.mods.placeholder){if(R=O-1,s[R]===e)return;O=s[R].toString()}}if(C.doEach){if(!Array.isArray(S))return;for(f=[],w=0,A=S.length;A>w;){if(C.mods.context)if(v(O)){if(R=O-1,s[R]===e)return;f.push(s[R])}else f=O;else if(S[w][O]!==e)j&&(S[w][O]=o),f.push(S[w][O]);else if(\"function\"==typeof S[w])f.push(O);else{if(!T.test(O))return;f.push([]);for(k in S[w])y(O,k)&&(j&&(S[w][k]=o),f[w].push(S[w][k]))}w++}}else if(C.mods.context)if(v(O)){if(R=O-1,s[R]===e)return;f=s[R]}else f=O;else if(S[O]!==e)j&&(S[O]=o),f=S[O];else if(\"function\"==typeof S)f=O;else{if(!T.test(O))return;f=[];for(k in S)y(O,k)&&(j&&(S[k]=o),f.push(S[k]))}}else if(C.exec===x)if(C.doEach){if(!Array.isArray(S))return;for(f=[],w=0,A=S.length;A>w;)C.simple?(j&&(S[w][$.get(S[w],{t:C.t,simple:!0})]=o),f.push(S[w][$.get(S[w],{t:C.t,simple:!0})])):(j&&(S[w][H(S[w],C,e,s,i)]=o),f.push(S[w][H(S[w],C,e,s,i)])),w++}else C.simple?(j&&(S[$.get(S,{t:C.t,simple:!0})]=o),f=S[$.get(S,{t:C.t,simple:!0})]):(j&&(S[H(S,C,e,s,i)]=o),f=S[H(S,C,e,s,i)]);else if(C.exec===h)if(C.doEach){if(!Array.isArray(i[g-2]))return;for(f=[],w=0,A=S.length;A>w;)C.t&&C.t.length?(c=H(S,C,e,s,i),c===e?f.push(S[w].apply(i[g-2][w])):Array.isArray(c)?f.push(S[w].apply(i[g-2][w],c)):f.push(S[w].call(i[g-2][w],c))):f.push(S[w].call(i[g-2][w])),w++}else C.t&&C.t.length?(c=C.simple?$.get(S,C):H(S,C,e,s,i),f=c===e?S.apply(i[g-2]):Array.isArray(c)?S.apply(i[g-2],c):S.call(i[g-2],c)):f=S.call(i[g-2]);i[g++]=f,S=f,m=f,b++}return S}},I=function(t,r,n){var o=n!==e,s=[],i=0,a=0;for(s=r.split(O),N.useCache&&(U[r]={t:s,simple:!0}),a=s.length;t!==e&&a>i;){if(\"\"===s[i])return;o&&(i===a-1?t[s[i]]=n:N.force&&\"undefined\"==typeof t[s[i]]&&(t[s[i]]={})),t=t[s[i++]]}return t},J=function(t,r,n){for(var o=n!==e,s=0,i=r.length;null!=t&&i>s;){if(\"\"===r[s])return;o&&(s===i-1?t[r[s]]=n:N.force&&\"undefined\"==typeof t[r[s]]&&(t[r[s]]={})),t=t[r[s++]]}return t},K=function(e,t,r,n){var o,s,i,a,f;if(n=n?n:\"\",e===t)return r(n);if(Array.isArray(e)){for(s=e.length,o=0;s>o;o++)if(i=K(e[o],t,r,n+O+o),!i)return;return!0}if(d(e)){for(a=Object.keys(e),s=a.length,s>1&&(a=a.sort()),o=0;s>o;o++)if(e.hasOwnProperty(a[o])&&(f=a[o],q.test(f)&&(f=E(b,f)),i=K(e[a[o]],t,r,n+O+f),!i))return;return!0}return!0};$.getTokens=function(e){var t=G(e);if(typeof t!==r)return t},$.isValid=function(e){return typeof G(e)!==r},$.escape=function(e){return e.replace(q,\"\\\\$&\")},$.get=function(e,t){var r,o=0,s=arguments.length;if(typeof t===n){if(N.useCache&&U[t]&&U[t].simple)return J(e,U[t].t);if(!R.test(t))return I(e,t)}else if(Array.isArray(t.t)&&t.simple)return J(e,t.t);if(r=[],s>2)for(o=2;s>o;o++)r[o-2]=arguments[o];return H(e,t,void 0,r)},$.set=function(t,r,o){var s,i,a=0,f=arguments.length,c=!1;if(typeof r===n?N.useCache&&U[r]&&U[r].simple?(i=J(t,U[r].t,o),c|=!0):R.test(r)||(i=I(t,r,o),c|=!0):Array.isArray(r.t)&&r.simple&&(i=J(t,r.t,o),c|=!0),!c){if(f>3)for(s=[],a=3;f>a;a++)s[a-3]=arguments[a];i=H(t,r,o,s)}return Array.isArray(i)?-1===i.indexOf(void 0):i!==e},$.find=function(e,t,r){var n=[],o=function(e){return n.push(e.substr(1)),r&&\"one\"!==r?!0:(n=n[0],!1)};return K(e,t,o),n[0]?n:void 0};var L=function(e,t,r,n){var o=\"\";Object.keys(e).forEach(function(r){e[r].exec===t&&(o=r)}),delete e[o],e[r]={exec:t},n&&(e[r].closer=n)},M=function(e){var t={};typeof e===n&&1===e.length||(e=\".\"),t[e]={exec:f},N.prefixes={},N.containers={},N.separators=t};$.setOptions=function(e){if(e.prefixes&&(N.prefixes=e.prefixes,U={}),e.separators&&(N.separators=e.separators,U={}),e.containers&&(N.containers=e.containers,U={}),typeof e.cache!==r&&(N.useCache=!!e.cache),typeof e.simple!==r){var t=N.useCache,n=N.force;N.simple=w(e.simple),N.simple?M():(Y(),N.useCache=t,N.force=n),U={}}typeof e.force!==r&&(N.force=w(e.force)),V()},$.setCache=function(e){N.useCache=w(e)},$.setCacheOn=function(){N.useCache=!0},$.setCacheOff=function(){N.useCache=!1},$.setForce=function(e){N.force=w(e)},$.setForceOn=function(){N.force=!0},$.setForceOff=function(){N.force=!1},$.setSimple=function(e,t){var r=N.useCache,n=N.force;N.simple=w(e),N.simple?(M(t),V()):(Y(),V(),N.useCache=r,N.force=n),U={}},$.setSimpleOn=function(e){N.simple=!0,M(e),V(),U={}},$.setSimpleOff=function(){var e=N.useCache,t=N.force;N.simple=!1,Y(),V(),N.useCache=e,N.force=t,U={}},$.setSeparatorProperty=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setSeparatorProperty - invalid value\");if(e===t||N.separators[e]&&N.separators[e].exec!==f||N.prefixes[e]||N.containers[e])throw new Error(\"setSeparatorProperty - value already in use\");L(N.separators,f,e),V(),U={}},$.setSeparatorCollection=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setSeparatorCollection - invalid value\");if(e===t||N.separators[e]&&N.separators[e].exec!==c||N.prefixes[e]||N.containers[e])throw new Error(\"setSeparatorCollection - value already in use\");L(N.separators,c,e),V(),U={}},$.setPrefixParent=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setPrefixParent - invalid value\");if(e===t||N.prefixes[e]&&N.prefixes[e].exec!==o||N.separators[e]||N.containers[e])throw new Error(\"setPrefixParent - value already in use\");L(N.prefixes,o,e),V(),U={}},$.setPrefixRoot=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setPrefixRoot - invalid value\");if(e===t||N.prefixes[e]&&N.prefixes[e].exec!==s||N.separators[e]||N.containers[e])throw new Error(\"setPrefixRoot - value already in use\");L(N.prefixes,s,e),V(),U={}},$.setPrefixPlaceholder=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setPrefixPlaceholder - invalid value\");if(e===t||N.prefixes[e]&&N.prefixes[e].exec!==i||N.separators[e]||N.containers[e])throw new Error(\"setPrefixPlaceholder - value already in use\");L(N.prefixes,i,e),V(),U={}},$.setPrefixContext=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setPrefixContext - invalid value\");if(e===t||N.prefixes[e]&&N.prefixes[e].exec!==a||N.separators[e]||N.containers[e])throw new Error(\"setPrefixContext - value already in use\");L(N.prefixes,a,e),V(),U={}},$.setContainerProperty=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error(\"setContainerProperty - invalid value\");if(e===t||N.containers[e]&&N.containers[e].exec!==f||N.separators[e]||N.prefixes[e])throw new Error(\"setContainerProperty - value already in use\");L(N.containers,f,e,r),V(),U={}},$.setContainerSinglequote=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error(\"setContainerSinglequote - invalid value\");if(e===t||N.containers[e]&&N.containers[e].exec!==l||N.separators[e]||N.prefixes[e])throw new Error(\"setContainerSinglequote - value already in use\");L(N.containers,l,e,r),V(),U={}},$.setContainerDoublequote=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error(\"setContainerDoublequote - invalid value\");if(e===t||N.containers[e]&&N.containers[e].exec!==p||N.separators[e]||N.prefixes[e])throw new Error(\"setContainerDoublequote - value already in use\");L(N.containers,p,e,r),V(),U={}},$.setContainerCall=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error(\"setContainerCall - invalid value\");if(e===t||N.containers[e]&&N.containers[e].exec!==h||N.separators[e]||N.prefixes[e])throw new Error(\"setContainerCall - value already in use\");L(N.containers,h,e,r),V(),U={}},$.setContainerEvalProperty=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error(\"setContainerProperty - invalid value\");if(e===t||N.containers[e]&&N.containers[e].exec!==x||N.separators[e]||N.prefixes[e])throw new Error(\"setContainerEvalProperty - value already in use\");L(N.containers,x,e,r),V(),U={}},$.resetOptions=function(){Y(),V(),U={}},Y(),V(),g&&$.setOptions(g)};return m});"],"file":"path-toolkit-min.js","sourceRoot":"/source/"}