{"version":3,"names":[],"mappings":"","sources":["path-toolkit.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.PathToolkit=t()}(this,function(){\"use strict\";function V(e,t){e.indexOf(P);var r=e.split(P,2),n=!0;if(r[0]){if(r[0]===e)return r[0]===t;n=n&&t.substr(0,r[0].length)===r[0]}return r[1]&&(n=n&&t.substr(-1*r[1].length)===r[1]),n}function q(e){return t.test(e)}function C(e){return typeof e!=T?e&&!0:\"TRUE\"===(e=e.toUpperCase())||\"YES\"===e||\"ON\"===e}var D=void 0,P=\"*\",A=\"undefined\",T=\"string\",_=\"parent\",F=\"root\",$=\"placeholder\",U=\"context\",N=\"property\",W=\"collection\",Y=\"each\",z=\"singlequote\",B=\"doublequote\",G=\"call\",H=\"evalProperty\",t=/^\\d+$/;return function(e){function o(){t=Object.keys(S.prefixes),r=Object.keys(S.separators),n=Object.keys(S.containers),l=n.map(function(e){return S.containers[e].closer}),w=\"\",Object.keys(S.separators).forEach(function(e){S.separators[e].exec===N&&(w=e)}),i=h=\"\",Object.keys(S.containers).forEach(function(e){S.containers[e].exec===z&&(h=e),S.containers[e].exec===B&&(i=e)}),a=\"[\\\\\\\\\"+[P].concat(t).concat(r).concat(n).join(\"\\\\\").replace(\"\\\\\"+w,\"\")+\"]\",E=new RegExp(a),l=\"[\\\\\\\\\\\\\"+[P].concat(t).concat(r).concat(n).concat(l).join(\"\\\\\")+\"]\",x=new RegExp(l,\"g\"),m=new RegExp(\"\\\\\"+l.replace(/^\\[/,\"[^\")),u=h||i?new RegExp(\"\\\\[\"+h+i+\"]\",\"g\"):\"\",O=new RegExp(\"\\\\\"+P)}function s(){(S=S||{}).useCache=!0,S.simple=!1,S.force=!1,S.defaultReturnVal=D,S.prefixes={\"^\":{exec:_},\"~\":{exec:F},\"%\":{exec:$},\"@\":{exec:U}},S.separators={\".\":{exec:N},\",\":{exec:W},\"<\":{exec:Y}},S.containers={\"[\":{closer:\"]\",exec:N},\"'\":{closer:\"'\",exec:z},'\"':{closer:'\"',exec:B},\"(\":{closer:\")\",exec:G},\"{\":{closer:\"}\",exec:H}}}function g(e){return(t=(r=(t=e).replace(u,\"\")).length)<2||r[0]!==r[t-1]||r[0]!==h&&r[0]!==i?e:e.slice(1,-1);var t,r}function f(e,t,r){var n,o=r!==D,s=0,i=t.split(w);for(S.useCache&&(R[t]={t:i,simple:!0}),n=i.length;e!==D&&s<n&&!p(i[s]);){if(\"\"===i[s])return;o&&(s===n-1?e[i[s]]=r:S.force&&void 0===e[i[s]]&&(e[i[s]]={})),e=e[i[s++]]}return e}function c(e,t,r){for(var n=r!==D,o=0,s=t.length;null!=e&&o<s;){if(\"\"===t[o])return;n&&(o===s-1?e[t[o]]=r:S.force&&void 0===e[t[o]]&&(e[t[o]]={})),e=e[t[o++]]}return e}var t,r,n,w,h,i,a,E,l,x,m,u,O,b=this,R={},S={},j=function(e){var t,r,n=\"\",o=!0,s=[],i=[],a={},f=\"\",c=!1,l=!1,u=\"\",p=0,h=\"\",x=\"\",d=[],y=0,v=0;if(S.useCache&&R[e]!==D)return R[e];if(t=(n=e.replace(m,\"$&\".substr(1))).length,typeof e==T&&!E.test(e))return s=n.split(w),S.useCache&&(R[e]={t:s,simple:o}),{t:s,simple:o};for(p=0;p<t;p++){if(v||\"\\\\\"!==n[p]||(v=p+1,p++),n[p]===P&&(c=!0),0<y)if(v||n[p]!==h||h===x.closer||y++,v||n[p]!==x.closer||y--,0<y)u+=n[p];else{if(p+1<t&&S.separators[n[p+1]]&&S.separators[n[p+1]].exec===W){if(u.length&&x.exec===N)i=g(u);else if(x.exec===z||x.exec===B)a.has?(i={w:u,mods:a,doEach:l},o&=!(a={})):(i=u,o&=!0);else{if((i=j(u))===D)return;i.exec=x.exec,i.doEach=l}d.push(i)}else if(d[0]){if(u.length&&x.exec===N)i=g(u);else if(x.exec===z||x.exec===B)a.has?(i={w:u,mods:a,doEach:l},o&=!(a={})):(i=u,o&=!0);else{if((i=j(u))===D)return;i.exec=x.exec,i.doEach=l}d.push(i),s.push({tt:d,doEach:l}),o&=!(d=[])}else if(x.exec===N)i={t:[g(u)]},l?(s.push({w:i.t[0],mods:{},doEach:!0}),o&=!1,l=!1):(s.push(i.t[0]),o&=!0);else if(x.exec===z||x.exec===B)a.has?(f={w:u,mods:a,doEach:l},o&=!(a={})):(s.push(u),o&=!0);else{if((i=\"\"===u?{t:[],simple:!0}:j(u))===D)return;i.exec=x.exec,i.doEach=l,s.push(i),o&=!1}u=\"\"}else if(!v&&n[p]in S.prefixes&&S.prefixes[n[p]].exec)a.has=!0,a[S.prefixes[n[p]].exec]?a[S.prefixes[n[p]].exec]++:a[S.prefixes[n[p]].exec]=1;else if(!v&&S.separators[n[p]]&&S.separators[n[p]].exec){if(r=S.separators[n[p]],!f&&(a.has||c))return;f&&(a.has||c||l)&&(f={w:f,mods:a,doEach:l},o&=!(a={})),r.exec===N||r.exec===Y?(d[0]!==D?(f&&d.push(f),s.push({tt:d,doEach:l}),o&=!(d=[])):(f&&s.push(f),o&=!0),l=r.exec===Y):r.exec===W&&f&&d.push(f),f=\"\",c=!1}else!v&&S.containers[n[p]]&&S.containers[n[p]].exec?(x=S.containers[n[p]],f&&(a.has||c||l)&&(\"string\"==typeof f?f={w:f,mods:a,doEach:l}:(f.mods=a,f.doEach=l),a={}),d[0]!==D?f&&d.push(f):(f&&s.push(f),o&=!0),h=n[p],f&&S.containers[h].exec!==G&&(l=!1),f=\"\",c=!1,y++):p<t&&(f+=n[p]);p<t&&p===v&&(v=0)}return v||(\"string\"==typeof f&&f&&(a.has||c||l)?(f={w:f,mods:f.mods||a,doEach:l},o&=!(a={})):f&&a.has&&(f.mods=a),d[0]!==D?(f&&d.push(f),s.push({tt:d,doEach:l}),o&=!1):(f&&s.push(f),o&=!0),0!==y)?void 0:(S.useCache&&(R[e]={t:s,simple:o}),{t:s,simple:o})},k=function(e,t,r,n,o){var s,i,a,f,c,l,u=r!==D,p=[],h=1,x=0,d=0,y=e,v=\"\",g=0,w=0,E=\"\",m=0,C=e,P=0,A=\"\";if(typeof t==T)if(S.useCache&&R[t])p=R[t].t;else{if((p=j(t))===D)return;p=p.t}else p=t.t||[t];if(0!==(s=p.length)){for(i=s-1,o?h=o.length:o=[e];y!==D&&m<s;){if(c=u&&m===i,typeof(v=p[m])==T){if(u)if(c){if(C[v]=r,C[v]!==r)return}else S.force&&void 0===C[v]&&(C[v]={});f=C[v]}else if(v===D)f=void 0;else if(v.tt)if(f=[],v.doEach){if(!Array.isArray(C))return;for(d=0,w=C.length;d<w;){for(x=0,f.push([]),g=v.tt.length;x<g;){if(v.tt[x].doEach=!1,(a=c?k(C[d],v.tt[x],r,n,o):\"string\"==typeof v.tt[x]?C[d][v.tt[x]]:k(C[d],v.tt[x],void 0,n,o))===D)return;c?v.tt[x].t&&v.tt[x].exec===H?C[d][a]=r:f[d].push(a):v.tt[x].t&&v.tt[x].exec===H?f[d].push(C[d][a]):f[d].push(a),x++}d++}}else for(x=0,g=v.tt.length;x<g;){if((a=c?k(C,v.tt[x],r,n,o):\"string\"==typeof v.tt[x]?C[v.tt[x]]:k(C,v.tt[x],void 0,n,o))===D)return;c?v.tt[x].t&&v.tt[x].exec===H?C[a]=r:f.push(a):v.tt[x].t&&v.tt[x].exec===H?f.push(C[a]):f.push(a),x++}else if(v.w){if(E=v.w,v.mods.has){if(v.mods.parent&&(C=o[h-1-v.mods.parent])===D)return;if(v.mods.root&&(o=[C=o[0]],h=1),v.mods.placeholder){if(n[P=E-1]===D)return;E=n[P].toString()}}if(v.doEach){if(!Array.isArray(C))return;for(f=[],x=0,w=C.length;x<w;){if(v.mods.context)if(q(E)){if(n[P=E-1]===D)return;f.push(n[P])}else f=E;else if(C[x][E]!==D)c&&(C[x][E]=r),f.push(C[x][E]);else if(\"function\"==typeof C[x])f.push(E);else{if(!O.test(E))return;for(A in f.push([]),C[x])V(E,A)&&(c&&(C[x][A]=r),f[x].push(C[x][A]))}x++}}else if(v.mods.context)if(q(E)){if(n[P=E-1]===D)return;f=n[P]}else f=E;else if(C[E]!==D)c&&(C[E]=r),f=C[E];else if(\"function\"==typeof C)f=E;else{if(!O.test(E))return;for(A in f=[],C)V(E,A)&&(c&&(C[A]=r),f.push(C[A]))}}else if(v.exec===H)if(v.doEach){if(!Array.isArray(C))return;for(f=[],x=0,w=C.length;x<w;)v.simple?(c&&(C[x][b.get(C[x],{t:v.t,simple:!0})]=r),f.push(C[x][b.get(C[x],{t:v.t,simple:!0})])):(c&&(C[x][k(C[x],v,D,n,o)]=r),f.push(C[x][k(C[x],v,D,n,o)])),x++}else f=v.simple?(c&&(C[b.get(C,{t:v.t,simple:!0})]=r),C[b.get(C,{t:v.t,simple:!0})]):(c&&(C[k(C,v,D,n,o)]=r),C[k(C,v,D,n,o)]);else if(v.exec===G)if(v.doEach){if(!Array.isArray(o[h-2]))return;for(f=[],x=0,w=C.length;x<w;)v.t&&v.t.length?(l=k(C,v,D,n,o))===D?f.push(C[x].apply(o[h-2][x])):Array.isArray(l)?f.push(C[x].apply(o[h-2][x],l)):f.push(C[x].call(o[h-2][x],l)):f.push(C[x].call(o[h-2][x])),x++}else f=v.t&&v.t.length?(l=v.simple?b.get(C,v):k(C,v,D,n,o))===D?C.apply(o[h-2]):Array.isArray(l)?C.apply(o[h-2],l):C.call(o[h-2],l):C.call(o[h-2]);y=C=o[h++]=f,m++}return C}},d=function(e,t,r,n,o){var s,i,a,f,c,l,u,p;if(typeof n==A)n=\"\";else if(typeof o!=A&&o(e,n))throw new Error('Circular object provided. Path at \"'+n+'\" makes a loop.');if(e===t)return r(n);if(Array.isArray(e)){for(i=e.length,s=0;s<i;s++)if(!d(e[s],t,r,\"\"===n?s:n+w+s,o))return;return!0}if(typeof(p=e)==A||null===p||\"function\"!=typeof p&&\"object\"!=typeof p)return!0;for(1<(i=(a=Object.keys(e)).length)&&(a=a.sort()),s=0;s<i;s++)if(e.hasOwnProperty(a[s])&&(f=a[s],x.test(f)&&(c=h,l=f,u=void 0,u=new RegExp(c,\"g\"),f=c+l.replace(u,\"\\\\\"+c)+c),!d(e[a[s]],t,r,\"\"===n?f:n+w+f,o)))return;return!0},p=function(e){return[\"__proto__\",\"constructor\",\"prototype\"].includes(e)};b.getTokens=function(e){e=j(e);if(typeof e!=A)return e},b.isValid=function(e){return typeof j(e)!=A},b.escape=function(e){return e.replace(x,\"\\\\$&\")},b.get=function(e,t){var r,n,o=0,s=arguments.length;if(typeof t==T)if(S.useCache&&R[t]&&R[t].simple)r=c(e,R[t].t);else if(E.test(t)){if(n=[],2<s)for(o=2;o<s;o++)n[o-2]=arguments[o];r=k(e,t,void 0,n)}else r=f(e,t);else if(Array.isArray(t.t)&&t.simple)r=c(e,t.t);else{if(n=[],2<s)for(o=2;o<s;o++)n[o-2]=arguments[o];r=k(e,t,void 0,n)}return r===D?S.defaultReturnVal:r},b.getWithDefault=function(e,t,r){var n,o=0,s=arguments.length,i=[e,t];if(typeof t==T)if(S.useCache&&R[t]&&R[t].simple)n=c(e,R[t].t);else if(E.test(t)){if(i=[],3<s)for(o=3;o<s;o++)i[o-3]=arguments[o];n=k(e,t,void 0,i)}else n=f(e,t);else if(Array.isArray(t.t)&&t.simple)n=c(e,t.t);else{if(i=[],3<s)for(o=3;o<s;o++)i[o-3]=arguments[o];n=k(e,t,void 0,i)}return n===D?r:n},b.set=function(e,t,r){var n,o,s=0,i=arguments.length,a=!1;if(typeof t==T?S.useCache&&R[t]&&R[t].simple?(o=c(e,R[t].t,r),a|=!0):E.test(t)||(o=f(e,t,r),a|=!0):Array.isArray(t.t)&&t.simple&&(o=c(e,t.t,r),a|=!0),!a){if(3<i)for(n=[],s=3;s<i;s++)n[s-3]=arguments[s];o=k(e,t,r,n)}return Array.isArray(o)?-1===o.indexOf(void 0):o!==D},b.find=function(e,t,r){var n=[];return d(e,t,function(e){return n.push(e),!(!r||\"one\"===r)}),r&&\"one\"!==r?0<n.length?n:void 0:0<n.length?n[0]:void 0},b.findSafe=function(n,e,t){var r=[];return d(n,e,function(e){return r.push(e),!(!t||\"one\"===t)},D,function(e,t){for(var r=b.getTokens(t);r.t.pop();)if(b.get(n,r)===e)return!0;return!1}),t&&\"one\"!==t?0<r.length?r:void 0:0<r.length?r[0]:void 0};function y(t,r,e,n){var o=\"\";Object.keys(t).forEach(function(e){t[e].exec===r&&(o=e)}),delete t[o],t[e]={exec:r},n&&(t[e].closer=n)}function v(e){var t={};typeof e==T&&1===e.length||(e=\".\"),t[e]={exec:N},S.prefixes={},S.containers={},S.separators=t}b.setOptions=function(e){var t,r;e.prefixes&&(S.prefixes=e.prefixes,R={}),e.separators&&(S.separators=e.separators,R={}),e.containers&&(S.containers=e.containers,R={}),typeof e.cache!=A&&(S.useCache=!!e.cache),typeof e.simple!=A&&(t=S.useCache,r=S.force,S.defaultReturnVal,S.simple=C(e.simple),S.simple?v():(s(),S.useCache=t,S.force=r),R={}),typeof e.force!=A&&(S.force=C(e.force)),Object.keys(e).includes(\"defaultReturnVal\")&&(S.defaultReturnVal=e.defaultReturnVal),o()},b.setCache=function(e){S.useCache=C(e)},b.setCacheOn=function(){S.useCache=!0},b.setCacheOff=function(){S.useCache=!1},b.setForce=function(e){S.force=C(e)},b.setForceOn=function(){S.force=!0},b.setForceOff=function(){S.force=!1},b.setSimple=function(e,t){var r=S.useCache,n=S.force;S.simple=C(e),S.simple?(v(t),o()):(s(),o(),S.useCache=r,S.force=n),R={}},b.setSimpleOn=function(e){S.simple=!0,v(e),o(),R={}},b.setSimpleOff=function(){var e=S.useCache,t=S.force;S.simple=!1,s(),o(),S.useCache=e,S.force=t,R={}},b.setDefaultReturnVal=function(e){S.defaultReturnVal=e},b.setSeparatorProperty=function(e){if(typeof e!=T||1!==e.length)throw new Error(\"setSeparatorProperty - invalid value\");if(e===P||S.separators[e]&&S.separators[e].exec!==N||S.prefixes[e]||S.containers[e])throw new Error(\"setSeparatorProperty - value already in use\");y(S.separators,N,e),o(),R={}},b.setSeparatorCollection=function(e){if(typeof e!=T||1!==e.length)throw new Error(\"setSeparatorCollection - invalid value\");if(e===P||S.separators[e]&&S.separators[e].exec!==W||S.prefixes[e]||S.containers[e])throw new Error(\"setSeparatorCollection - value already in use\");y(S.separators,W,e),o(),R={}},b.setPrefixParent=function(e){if(typeof e!=T||1!==e.length)throw new Error(\"setPrefixParent - invalid value\");if(e===P||S.prefixes[e]&&S.prefixes[e].exec!==_||S.separators[e]||S.containers[e])throw new Error(\"setPrefixParent - value already in use\");y(S.prefixes,_,e),o(),R={}},b.setPrefixRoot=function(e){if(typeof e!=T||1!==e.length)throw new Error(\"setPrefixRoot - invalid value\");if(e===P||S.prefixes[e]&&S.prefixes[e].exec!==F||S.separators[e]||S.containers[e])throw new Error(\"setPrefixRoot - value already in use\");y(S.prefixes,F,e),o(),R={}},b.setPrefixPlaceholder=function(e){if(typeof e!=T||1!==e.length)throw new Error(\"setPrefixPlaceholder - invalid value\");if(e===P||S.prefixes[e]&&S.prefixes[e].exec!==$||S.separators[e]||S.containers[e])throw new Error(\"setPrefixPlaceholder - value already in use\");y(S.prefixes,$,e),o(),R={}},b.setPrefixContext=function(e){if(typeof e!=T||1!==e.length)throw new Error(\"setPrefixContext - invalid value\");if(e===P||S.prefixes[e]&&S.prefixes[e].exec!==U||S.separators[e]||S.containers[e])throw new Error(\"setPrefixContext - value already in use\");y(S.prefixes,U,e),o(),R={}},b.setContainerProperty=function(e,t){if(typeof e!=T||1!==e.length||typeof t!=T||1!==t.length)throw new Error(\"setContainerProperty - invalid value\");if(e===P||S.containers[e]&&S.containers[e].exec!==N||S.separators[e]||S.prefixes[e])throw new Error(\"setContainerProperty - value already in use\");y(S.containers,N,e,t),o(),R={}},b.setContainerSinglequote=function(e,t){if(typeof e!=T||1!==e.length||typeof t!=T||1!==t.length)throw new Error(\"setContainerSinglequote - invalid value\");if(e===P||S.containers[e]&&S.containers[e].exec!==z||S.separators[e]||S.prefixes[e])throw new Error(\"setContainerSinglequote - value already in use\");y(S.containers,z,e,t),o(),R={}},b.setContainerDoublequote=function(e,t){if(typeof e!=T||1!==e.length||typeof t!=T||1!==t.length)throw new Error(\"setContainerDoublequote - invalid value\");if(e===P||S.containers[e]&&S.containers[e].exec!==B||S.separators[e]||S.prefixes[e])throw new Error(\"setContainerDoublequote - value already in use\");y(S.containers,B,e,t),o(),R={}},b.setContainerCall=function(e,t){if(typeof e!=T||1!==e.length||typeof t!=T||1!==t.length)throw new Error(\"setContainerCall - invalid value\");if(e===P||S.containers[e]&&S.containers[e].exec!==G||S.separators[e]||S.prefixes[e])throw new Error(\"setContainerCall - value already in use\");y(S.containers,G,e,t),o(),R={}},b.setContainerEvalProperty=function(e,t){if(typeof e!=T||1!==e.length||typeof t!=T||1!==t.length)throw new Error(\"setContainerProperty - invalid value\");if(e===P||S.containers[e]&&S.containers[e].exec!==H||S.separators[e]||S.prefixes[e])throw new Error(\"setContainerEvalProperty - value already in use\");y(S.containers,H,e,t),o(),R={}},b.resetOptions=function(){s(),o(),R={}},s(),o(),e&&b.setOptions(e)}});"],"file":"path-toolkit-min.js"}