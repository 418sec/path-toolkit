!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.PathToolkit=r()}(this,function(){"use strict";var e=function(e){return e}(),r="*",t="undefined",n="string",o="parent",s="root",i="placeholder",a="context",f="property",c="collection",l="singlequote",p="doublequote",u="call",h="evalProperty",x=function(e,t){var n=(e.indexOf(r),e.split(r,2)),o=!0;if(n[0]){if(n[0]===e)return n[0]===t;o=o&&t.substr(0,n[0].length)===n[0]}return n[1]&&(o=o&&t.substr(-1*n[1].length)===n[1]),o},y=function(e){return typeof e===t||null===e?!1:"function"==typeof e||"object"==typeof e},w=function(e){var r;return typeof e!==n?e&&!0:(r=e.toUpperCase(),"TRUE"===r||"YES"===r||"ON"===r)},v=function(e,r){var t=new RegExp(e,"g");return e+r.replace(t,"\\"+e)+e},d=function(d){var g,C,P,E,m,O,b,A,S,j,k,R,q=this,D={},F={},T=function(){g=Object.keys(F.prefixes),C=Object.keys(F.separators),P=Object.keys(F.containers),E=P.map(function(e){return F.containers[e].closer}),m="",Object.keys(F.separators).forEach(function(e){F.separators[e].exec===f&&(m=e)}),O="",Object.keys(F.containers).forEach(function(e){F.containers[e].exec===l&&(O=e)}),b="[\\\\"+[r].concat(g).concat(C).concat(P).join("\\").replace("\\"+m,"")+"]",A=new RegExp(b),S="[\\\\\\"+[r].concat(g).concat(C).concat(P).concat(E).join("\\")+"]",j=new RegExp(S,"g"),k=new RegExp("\\"+S.replace(/^\[/,"[^")),R=new RegExp("\\"+r)},U=function(){F=F||{},F.useCache=!0,F.simple=!1,F.force=!1,F.prefixes={"<":{exec:o},"~":{exec:s},"%":{exec:i},"@":{exec:a}},F.separators={".":{exec:f},",":{exec:c}},F.containers={"[":{closer:"]",exec:f},"'":{closer:"'",exec:l},'"':{closer:'"',exec:p},"(":{closer:")",exec:u},"{":{closer:"}",exec:h}}},$=function(t){var o="",s=!0,i=[],a=[],u={},h=0,x="",y=!1,w="",v=0,d="",g="",C="",P=[],E=0,O=0;if(F.useCache&&D[t]!==e)return D[t];if(o=t.replace(k,"$&".substr(1)),h=o.length,typeof t===n&&!A.test(t))return i=o.split(m),F.useCache&&(D[t]={t:i,simple:s}),{t:i,simple:s};for(v=0;h>v;v++){if(O||"\\"!==o[v]||(O=v+1,v++),o[v]===r&&(y=!0),E>0)if(!O&&o[v]===d&&d!==g.closer&&E++,!O&&o[v]===g.closer&&E--,E>0)w+=o[v];else{if(h>v+1&&F.separators[o[v+1]]&&F.separators[o[v+1]].exec===c){if(a=$(w),a===e)return;a.exec=g.exec,P.push(a)}else if(P[0]){if(a=$(w),a===e)return;a.exec=g.exec,P.push(a),i.push(P),P=[],s&=!1}else if(g.exec===f){if(a=$(w),a===e)return;i=i.concat(a.t),s&=a.simple}else if(g.exec===l||g.exec===p)i.push(w),s&=!0;else{if(a=$(w),a===e)return;a.exec=g.exec,i.push(a),s&=!1}w=""}else if(!O&&o[v]in F.prefixes&&F.prefixes[o[v]].exec)u.has=!0,u[F.prefixes[o[v]].exec]?u[F.prefixes[o[v]].exec]++:u[F.prefixes[o[v]].exec]=1;else if(!O&&F.separators.hasOwnProperty(o[v])&&F.separators[o[v]].exec){if(C=F.separators[o[v]],!x&&(u.has||y))return;x&&(u.has||y)&&(x={w:x,mods:u},u={},s&=!1),C.exec===f?P[0]!==e?(x&&P.push(x),i.push(P),P=[],s&=!1):(x&&i.push(x),s&=!0):C.exec===c&&x&&P.push(x),x="",y=!1}else!O&&F.containers.hasOwnProperty(o[v])&&F.containers[o[v]].exec?(g=F.containers[o[v]],x&&(u.has||y)&&(x={w:x,mods:u},u={}),P[0]!==e?x&&P.push(x):(x&&i.push(x),s&=!0),x="",y=!1,d=o[v],E++):h>v&&(x+=o[v]);h>v&&v===O&&(O=0)}return O||(x&&(u.has||y)&&(x={w:x,mods:u},u={},s&=!1),P[0]!==e?(x&&P.push(x),i.push(P),s&=!1):(x&&i.push(x),s&=!0),0!==E)?void 0:(F.useCache&&(D[t]={t:i,simple:s}),{t:i,simple:s})},N=function(r,t,o,s,i){var a,f,c,l=o!==e,p=[],y=0,w=0,v=1,d=0,g=r,C="",P=0,E="",m=0,O=r,b=!1,A=0,S="";if(typeof t===n)if(F.useCache&&D[t])p=D[t].t;else{if(p=$(t),p===e)return;p=p.t}else p=t.t?t.t:[t];if(y=p.length,0!==y){for(w=y-1,i?v=i.length:i=[r];g!==e&&y>m;){if(C=p[m],b=l&&m===w,typeof C===n){if(l)if(b){if(O[C]=o,O[C]!==o)return}else F.force&&(Array.isArray(g)?O[C]!==e:!O.hasOwnProperty(C))&&(O[C]={});f=O[C]}else if(C===e)f=void 0;else if(Array.isArray(C))for(f=[],P=C.length,d=0;P>d;d++){if(a=N(O,C[d],o,s,i.slice()),a===e)return;b?C[d].t&&C[d].exec===h?O[a]=o:f=f.concat(a):f=C[d].t&&C[d].exec===h?f.concat(O[a]):f.concat(a)}else if(C.w){if(E=C.w+"",C.mods.parent&&(O=i[v-1-C.mods.parent],O===e))return;if(C.mods.root&&(O=i[0],i=[O],v=1),C.mods.placeholder){if(A=E-1,s[A]===e)return;E=s[A].toString()}if(C.mods.context){if(A=E-1,s[A]===e)return;f=s[A]}else if(O[E]!==e)b&&(O[E]=o),f=O[E];else if("function"==typeof O)f=E;else{if(!R.test(E))return;f=[];for(S in O)O.hasOwnProperty(S)&&x(E,S)&&(b&&(O[S]=o),f.push(O[S]))}}else C.exec===h?(b&&(O[N(O,C,e,s,i.slice())]=o),f=O[N(O,C,e,s,i.slice())]):C.exec===u&&(C.t&&C.t.length?(c=N(O,C,e,s),f=c===e?O.apply(i[v-2]):Array.isArray(c)?O.apply(i[v-2],c):O.call(i[v-2],c)):f=O.call(i[v-2]));i.push(f),v++,O=f,g=f,m++}return O}},V=function(r,t,n){var o=n!==e,s=[],i=0,a=0;for(s=t.split(m),F.useCache&&(D[t]={t:s,simple:!0}),a=s.length;r!==e&&a>i;){if(""===s[i])return;o&&(i===a-1?r[s[i]]=n:F.force&&(Array.isArray(r)?r[s[i]]!==e:!r.hasOwnProperty(s[i]))&&(r[s[i]]={})),r=r[s[i++]]}return r},Y=function(r,t,n){for(var o=n!==e,s=0,i=t.length;null!=r&&i>s;){if(""===t[s])return;o&&(s===i-1?r[t[s]]=n:F.force&&(Array.isArray(r)?r[t[s]]!==e:!r.hasOwnProperty(t[s]))&&(r[t[s]]={})),r=r[t[s++]]}return r},z=function(e,r,t,n){var o,s,i,a,f;if(n=n?n:"",e===r)return t(n);if(Array.isArray(e)){for(s=e.length,o=0;s>o;o++)if(i=z(e[o],r,t,n+m+o),!i)return;return!0}if(y(e)){for(a=Object.keys(e),s=a.length,s>1&&(a=a.sort()),o=0;s>o;o++)if(e.hasOwnProperty(a[o])&&(f=a[o],j.test(f)&&(f=v(O,f)),i=z(e[a[o]],r,t,n+m+f),!i))return;return!0}return!0};q.getTokens=function(e){var r=$(e);if(typeof r!==t)return r},q.isValid=function(e){return typeof $(e)!==t},q.escape=function(e){return e.replace(j,"\\$&")},q.get=function(e,r){var t,o=0,s=arguments.length;if(typeof r===n){if(F.useCache&&D[r]&&D[r].simple)return Y(e,D[r].t);if(!A.test(r))return V(e,r)}else if(Object.hasOwnProperty.call(r,"t")&&Array.isArray(r.t)&&r.simple)return Y(e,r.t);if(t=[],s>2)for(o=2;s>o;o++)t[o-2]=arguments[o];return N(e,r,void 0,t)},q.set=function(r,t,o){var s,i,a=0,f=arguments.length,c=!1;if(typeof t!==n||A.test(t))if(Object.hasOwnProperty.call(t,"t")&&Array.isArray(t.t)){for(a=t.t.length-1;a>=0;a--)if(!c&&typeof t.t[a]!==n){if(s=[],f>3)for(a=3;f>a;a++)s[a-3]=arguments[a];i=N(r,t,o,s),c=!0}c||(i=Y(r,t.t,o))}else{if(f>3)for(s=[],a=3;f>a;a++)s[a-3]=arguments[a];i=N(r,t,o,s)}else i=V(r,t,o),c=!0;return Array.isArray(i)?-1===i.indexOf(void 0):i!==e},q.find=function(e,r,t){var n=[],o=function(e){return n.push(e.substr(1)),t&&"one"!==t?!0:(n=n[0],!1)};return z(e,r,o),n[0]?n:void 0};var B=function(e,r,t,n){var o="";Object.keys(e).forEach(function(t){e[t].exec===r&&(o=t)}),delete e[o],e[t]={exec:r},n&&(e[t].closer=n)},G=function(e){var r={};typeof e===n&&1===e.length||(e="."),r[e]={exec:f},F.prefixes={},F.containers={},F.separators=r};q.setOptions=function(e){if(e.prefixes&&(F.prefixes=e.prefixes,D={}),e.separators&&(F.separators=e.separators,D={}),e.containers&&(F.containers=e.containers,D={}),typeof e.cache!==t&&(F.useCache=!!e.cache),typeof e.simple!==t){var r=F.useCache,n=F.force;F.simple=w(e.simple),F.simple?G():(U(),F.useCache=r,F.force=n),D={}}typeof e.force!==t&&(F.force=w(e.force)),T()},q.setCache=function(e){F.useCache=w(e)},q.setCacheOn=function(){F.useCache=!0},q.setCacheOff=function(){F.useCache=!1},q.setForce=function(e){F.force=w(e)},q.setForceOn=function(){F.force=!0},q.setForceOff=function(){F.force=!1},q.setSimple=function(e,r){var t=F.useCache,n=F.force;F.simple=w(e),F.simple?(G(r),T()):(U(),T(),F.useCache=t,F.force=n),D={}},q.setSimpleOn=function(e){F.simple=!0,G(e),T(),D={}},q.setSimpleOff=function(){var e=F.useCache,r=F.force;F.simple=!1,U(),T(),F.useCache=e,F.force=r,D={}},q.setSeparatorProperty=function(e){if(typeof e!==n||1!==e.length)throw new Error("setSeparatorProperty - invalid value");if(e===r||F.separators[e]&&F.separators[e].exec!==f||F.prefixes[e]||F.containers[e])throw new Error("setSeparatorProperty - value already in use");B(F.separators,f,e),T(),D={}},q.setSeparatorCollection=function(e){if(typeof e!==n||1!==e.length)throw new Error("setSeparatorCollection - invalid value");if(e===r||F.separators[e]&&F.separators[e].exec!==c||F.prefixes[e]||F.containers[e])throw new Error("setSeparatorCollection - value already in use");B(F.separators,c,e),T(),D={}},q.setPrefixParent=function(e){if(typeof e!==n||1!==e.length)throw new Error("setPrefixParent - invalid value");if(e===r||F.prefixes[e]&&F.prefixes[e].exec!==o||F.separators[e]||F.containers[e])throw new Error("setPrefixParent - value already in use");B(F.prefixes,o,e),T(),D={}},q.setPrefixRoot=function(e){if(typeof e!==n||1!==e.length)throw new Error("setPrefixRoot - invalid value");if(e===r||F.prefixes[e]&&F.prefixes[e].exec!==s||F.separators[e]||F.containers[e])throw new Error("setPrefixRoot - value already in use");B(F.prefixes,s,e),T(),D={}},q.setPrefixPlaceholder=function(e){if(typeof e!==n||1!==e.length)throw new Error("setPrefixPlaceholder - invalid value");if(e===r||F.prefixes[e]&&F.prefixes[e].exec!==i||F.separators[e]||F.containers[e])throw new Error("setPrefixPlaceholder - value already in use");B(F.prefixes,i,e),T(),D={}},q.setPrefixContext=function(e){if(typeof e!==n||1!==e.length)throw new Error("setPrefixContext - invalid value");if(e===r||F.prefixes[e]&&F.prefixes[e].exec!==a||F.separators[e]||F.containers[e])throw new Error("setPrefixContext - value already in use");B(F.prefixes,a,e),T(),D={}},q.setContainerProperty=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error("setContainerProperty - invalid value");if(e===r||F.containers[e]&&F.containers[e].exec!==f||F.separators[e]||F.prefixes[e])throw new Error("setContainerProperty - value already in use");B(F.containers,f,e,t),T(),D={}},q.setContainerSinglequote=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error("setContainerSinglequote - invalid value");if(e===r||F.containers[e]&&F.containers[e].exec!==l||F.separators[e]||F.prefixes[e])throw new Error("setContainerSinglequote - value already in use");B(F.containers,l,e,t),T(),D={}},q.setContainerDoublequote=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error("setContainerDoublequote - invalid value");if(e===r||F.containers[e]&&F.containers[e].exec!==p||F.separators[e]||F.prefixes[e])throw new Error("setContainerDoublequote - value already in use");B(F.containers,p,e,t),T(),D={}},q.setContainerCall=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error("setContainerCall - invalid value");if(e===r||F.containers[e]&&F.containers[e].exec!==u||F.separators[e]||F.prefixes[e])throw new Error("setContainerCall - value already in use");B(F.containers,u,e,t),T(),D={}},q.setContainerEvalProperty=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error("setContainerProperty - invalid value");if(e===r||F.containers[e]&&F.containers[e].exec!==h||F.separators[e]||F.prefixes[e])throw new Error("setContainerEvalProperty - value already in use");B(F.containers,h,e,t),T(),D={}},q.resetOptions=function(){U(),T(),D={}},U(),T(),d&&q.setOptions(d)};return d});
//# sourceMappingURL=path-toolkit-min.js.map