{"version":3,"names":[],"mappings":"","sources":["path-toolkit.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.PathToolkit=t()}(this,function(){\"use strict\";var e=function(e){return e}(),t=\"*\",r=\"undefined\",n=\"string\",o=\"parent\",s=\"root\",i=\"placeholder\",a=\"context\",f=\"literal\",c=\"property\",l=\"collection\",p=\"each\",u=\"singlequote\",h=\"doublequote\",x=\"call\",y=\"evalProperty\",d=function(e,r){var n=(e.indexOf(t),e.split(t,2)),o=!0;if(n[0]){if(n[0]===e)return n[0]===r;o=o&&r.substr(0,n[0].length)===n[0]}return n[1]&&(o=o&&r.substr(-1*n[1].length)===n[1]),o},g=function(e){return typeof e===r||null===e?!1:\"function\"==typeof e||\"object\"==typeof e},v=function(e){var t;return typeof e!==n?e&&!0:(t=e.toUpperCase(),\"TRUE\"===t||\"YES\"===t||\"ON\"===t)},w=function(e,t){var r=new RegExp(e,\"g\");return e+t.replace(r,\"\\\\\"+e)+e},m=function(m){var E,C,P,A,O,b,S,j,q,k,R,D,F,T,U=this,$={},z={},N=function(){E=Object.keys(z.prefixes),C=Object.keys(z.separators),P=Object.keys(z.containers),A=P.map(function(e){return z.containers[e].closer}),O=\"\",Object.keys(z.separators).forEach(function(e){z.separators[e].exec===c&&(O=e)}),b=\"\",S=\"\",Object.keys(z.containers).forEach(function(e){z.containers[e].exec===u&&(b=e),z.containers[e].exec===h&&(S=e)}),j=\"[\\\\\\\\\"+[t].concat(E).concat(C).concat(P).join(\"\\\\\").replace(\"\\\\\"+O,\"\")+\"]\",q=new RegExp(j),k=\"[\\\\\\\\\\\\\"+[t].concat(E).concat(C).concat(P).concat(A).join(\"\\\\\")+\"]\",R=new RegExp(k,\"g\"),D=new RegExp(\"\\\\\"+k.replace(/^\\[/,\"[^\")),F=b||S?new RegExp(\"\\\\[\"+b+S+\"]\",\"g\"):\"\",T=new RegExp(\"\\\\\"+t)},V=function(){z=z||{},z.useCache=!0,z.simple=!1,z.force=!1,z.prefixes={\"^\":{exec:o},\"~\":{exec:s},\"%\":{exec:i},\"@\":{exec:a},\"!\":{exec:f}},z.separators={\".\":{exec:c},\",\":{exec:l},\"<\":{exec:p}},z.containers={\"[\":{closer:\"]\",exec:c},\"'\":{closer:\"'\",exec:u},'\"':{closer:'\"',exec:h},\"(\":{closer:\")\",exec:x},\"{\":{closer:\"}\",exec:y}}},Y=function(e){var t=e.replace(F,\"\"),r=t.length;return 2>r?!1:t[0]===t[r-1]&&(t[0]===b||t[0]===S)},B=function(e){return Y(e)?e.slice(1,-1):e},G=function(r){var o=\"\",s=!0,i=[],a=[],f={},y=0,d=\"\",g=!1,v=!1,w=\"\",m=0,E=\"\",C=\"\",P=\"\",A=[],b=0,S=0;if(console.log(\"tokenize:\",r),z.useCache&&$[r]!==e)return $[r];if(o=r.replace(D,\"$&\".substr(1)),y=o.length,typeof r===n&&!q.test(r))return i=o.split(O),z.useCache&&($[r]={t:i,simple:s}),{t:i,simple:s};for(m=0;y>m;m++){if(S||\"\\\\\"!==o[m]||(S=m+1,m++),o[m]===t&&(g=!0),b>0)if(!S&&o[m]===E&&E!==C.closer&&b++,!S&&o[m]===C.closer&&b--,b>0)w+=o[m];else{if(y>m+1&&z.separators[o[m+1]]&&z.separators[o[m+1]].exec===l){if(w.length&&C.exec===c)a=B(w);else if(C.exec===u||C.exec===h)console.log(\"3quote has mods:\",f.has,f),a=w;else{if(a=G(w),a===e)return;a.exec=C.exec,a.doEach=v}A.push(a)}else if(A[0]){if(w.length&&C.exec===c)a=B(w);else if(C.exec===u||C.exec===h)console.log(\"2quote has mods:\",f.has,f),a=w;else{if(a=G(w),a===e)return;a.exec=C.exec,a.doEach=v}A.push(a),i.push({tt:A,doEach:v}),A=[],s&=!1}else if(C.exec===c)a={t:[B(w)]},v?(i.push({w:a.t[0],mods:{},doEach:!0}),s&=!1,v=!1):(i.push(a.t[0]),s&=!0);else if(C.exec===u||C.exec===h)f.has?(d={w:w,mods:f,doEach:v},console.log(\"quote has mods:\",f.has,f),i.push(d),f={},s&=!1):(i.push(w),s&=!0);else{if(a=\"\"===w?{t:[],simple:!0}:G(w),a===e)return;a.exec=C.exec,a.doEach=v,i.push(a),s&=!1}w=\"\"}else if(!S&&o[m]in z.prefixes&&z.prefixes[o[m]].exec)f.has=!0,f[z.prefixes[o[m]].exec]?f[z.prefixes[o[m]].exec]++:f[z.prefixes[o[m]].exec]=1;else if(!S&&z.separators[o[m]]&&z.separators[o[m]].exec){if(P=z.separators[o[m]],!d&&(f.has||g))return;d&&(f.has||g||v)&&(d={w:d,mods:f,doEach:v},f={},s&=!1),P.exec===c||P.exec===p?(A[0]!==e?(d&&A.push(d),i.push({tt:A,doEach:v}),A=[],s&=!1):(d&&i.push(d),s&=!0),v=P.exec===p):P.exec===l&&d&&A.push(d),d=\"\",g=!1}else!S&&z.containers[o[m]]&&z.containers[o[m]].exec?(C=z.containers[o[m]],d&&(f.has||g||v)&&(\"string\"==typeof d?d={w:d,mods:f,doEach:v}:(d.mods=f,d.doEach=v),f={}),A[0]!==e?d&&A.push(d):(d&&i.push(d),s&=!0),E=o[m],d&&z.containers[E].exec!==x&&(v=!1),d=\"\",g=!1,b++):y>m&&(d+=o[m]);y>m&&m===S&&(S=0)}return S||(\"string\"==typeof d&&d&&(f.has||g||v)?(d={w:d,mods:f,doEach:v},f={},s&=!1):d&&d.mods&&(d.mods=f),A[0]!==e?(d&&A.push(d),i.push({tt:A,doEach:v}),s&=!1):(d&&i.push(d),s&=!0),0!==b)?void 0:(z.useCache&&($[r]={t:i,simple:s}),{t:i,simple:s})},H=function(t,r,o,s,i){var a,f,c,l=o!==e,p=[],u=0,h=0,g=1,v=0,w=0,m=t,E=\"\",C=0,P=0,A=\"\",O=0,b=t,S=!1,j=0,q=\"\";if(typeof r===n)if(z.useCache&&$[r])p=$[r].t;else{if(p=G(r),p===e)return;p=p.t}else p=r.t?r.t:[r];if(u=p.length,0!==u){for(h=u-1,i?g=i.length:i=[t];m!==e&&u>O;){if(E=p[O],S=l&&O===h,typeof E===n){if(l)if(S){if(b[E]=o,b[E]!==o)return}else z.force&&\"undefined\"==typeof b[E]&&(b[E]={});f=b[E]}else if(E===e)f=void 0;else if(E.tt)if(f=[],E.doEach){if(!Array.isArray(b))return;for(w=0,P=b.length;P>w;){for(v=0,f.push([]),C=E.tt.length;C>v;){if(E.tt[v].doEach=!1,a=S?H(b[w],E.tt[v],o,s,i):\"string\"==typeof E.tt[v]?b[w][E.tt[v]]:H(b[w],E.tt[v],void 0,s,i),a===e)return;S?E.tt[v].t&&E.tt[v].exec===y?b[w][a]=o:f[w].push(a):E.tt[v].t&&E.tt[v].exec===y?f[w].push(b[w][a]):f[w].push(a),v++}w++}}else for(v=0,C=E.tt.length;C>v;){if(a=S?H(b,E.tt[v],o,s,i):\"string\"==typeof E.tt[v]?b[E.tt[v]]:H(b,E.tt[v],void 0,s,i),a===e)return;S?E.tt[v].t&&E.tt[v].exec===y?b[a]=o:f.push(a):E.tt[v].t&&E.tt[v].exec===y?f.push(b[a]):f.push(a),v++}else if(E.w){if(A=E.w,E.mods.has){if(E.mods.parent&&(b=i[g-1-E.mods.parent],b===e))return;if(E.mods.root&&(b=i[0],i=[b],g=1),E.mods.placeholder){if(j=A-1,s[j]===e)return;A=s[j].toString()}E.mods.literal}if(E.doEach){if(!Array.isArray(b))return;for(f=[],v=0,P=b.length;P>v;){if(E.mods.context){if(j=A-1,s[j]===e)return;f.push(s[j])}else if(E.mods.literal)console.log(\"wordCopy:\",A),f.push(A);else if(b[v][A]!==e)S&&(b[v][A]=o),f.push(b[v][A]);else if(\"function\"==typeof b[v])f.push(A);else{if(!T.test(A))return;f.push([]);for(q in b[v])d(A,q)&&(S&&(b[v][q]=o),f[v].push(b[v][q]))}v++}}else if(E.mods.context){if(j=A-1,s[j]===e)return;f=s[j]}else if(E.mods.literal)console.log(\"wordCopy:\",A),f.push(A);else if(b[A]!==e)S&&(b[A]=o),f=b[A];else if(\"function\"==typeof b)f=A;else{if(!T.test(A))return;f=[];for(q in b)d(A,q)&&(S&&(b[q]=o),f.push(b[q]))}}else if(E.exec===y)if(E.doEach){if(!Array.isArray(b))return;for(f=[],v=0,P=b.length;P>v;)E.simple?(S&&(b[v][U.get(b[v],{t:E.t,simple:!0})]=o),f.push(b[v][U.get(b[v],{t:E.t,simple:!0})])):(S&&(b[v][H(b[v],E,e,s,i)]=o),f.push(b[v][H(b[v],E,e,s,i)])),v++}else E.simple?(S&&(b[U.get(b,{t:E.t,simple:!0})]=o),f=b[U.get(b,{t:E.t,simple:!0})]):(S&&(b[H(b,E,e,s,i)]=o),f=b[H(b,E,e,s,i)]);else if(E.exec===x)if(E.doEach){if(!Array.isArray(i[g-2]))return;for(f=[],v=0,P=b.length;P>v;)E.t&&E.t.length?(c=H(b,E,e,s,i),c===e?f.push(b[v].apply(i[g-2][v])):Array.isArray(c)?f.push(b[v].apply(i[g-2][v],c)):f.push(b[v].call(i[g-2][v],c))):f.push(b[v].call(i[g-2][v])),v++}else E.t&&E.t.length?(c=E.simple?U.get(b,E):H(b,E,e,s,i),f=c===e?b.apply(i[g-2]):Array.isArray(c)?b.apply(i[g-2],c):b.call(i[g-2],c)):f=b.call(i[g-2]);i[g++]=f,b=f,m=f,O++}return b}},I=function(t,r,n){var o=n!==e,s=[],i=0,a=0;for(s=r.split(O),z.useCache&&($[r]={t:s,simple:!0}),a=s.length;t!==e&&a>i;){if(\"\"===s[i])return;o&&(i===a-1?t[s[i]]=n:z.force&&\"undefined\"==typeof t[s[i]]&&(t[s[i]]={})),t=t[s[i++]]}return t},J=function(t,r,n){for(var o=n!==e,s=0,i=r.length;null!=t&&i>s;){if(\"\"===r[s])return;o&&(s===i-1?t[r[s]]=n:z.force&&\"undefined\"==typeof t[r[s]]&&(t[r[s]]={})),t=t[r[s++]]}return t},K=function(e,t,r,n){var o,s,i,a,f;if(n=n?n:\"\",e===t)return r(n);if(Array.isArray(e)){for(s=e.length,o=0;s>o;o++)if(i=K(e[o],t,r,n+O+o),!i)return;return!0}if(g(e)){for(a=Object.keys(e),s=a.length,s>1&&(a=a.sort()),o=0;s>o;o++)if(e.hasOwnProperty(a[o])&&(f=a[o],R.test(f)&&(f=w(b,f)),i=K(e[a[o]],t,r,n+O+f),!i))return;return!0}return!0};U.getTokens=function(e){var t=G(e);if(typeof t!==r)return t},U.isValid=function(e){return typeof G(e)!==r},U.escape=function(e){return e.replace(R,\"\\\\$&\")},U.get=function(e,t){var r,o=0,s=arguments.length;if(typeof t===n){if(z.useCache&&$[t]&&$[t].simple)return J(e,$[t].t);if(!q.test(t))return I(e,t)}else if(Array.isArray(t.t)&&t.simple)return J(e,t.t);if(r=[],s>2)for(o=2;s>o;o++)r[o-2]=arguments[o];return H(e,t,void 0,r)},U.set=function(t,r,o){var s,i,a=0,f=arguments.length,c=!1;if(typeof r===n?z.useCache&&$[r]&&$[r].simple?(i=J(t,$[r].t,o),c|=!0):q.test(r)||(i=I(t,r,o),c|=!0):Array.isArray(r.t)&&r.simple&&(i=J(t,r.t,o),c|=!0),!c){if(f>3)for(s=[],a=3;f>a;a++)s[a-3]=arguments[a];i=H(t,r,o,s)}return Array.isArray(i)?-1===i.indexOf(void 0):i!==e},U.find=function(e,t,r){var n=[],o=function(e){return n.push(e.substr(1)),r&&\"one\"!==r?!0:(n=n[0],!1)};return K(e,t,o),n[0]?n:void 0};var L=function(e,t,r,n){var o=\"\";Object.keys(e).forEach(function(r){e[r].exec===t&&(o=r)}),delete e[o],e[r]={exec:t},n&&(e[r].closer=n)},M=function(e){var t={};typeof e===n&&1===e.length||(e=\".\"),t[e]={exec:c},z.prefixes={},z.containers={},z.separators=t};U.setOptions=function(e){if(e.prefixes&&(z.prefixes=e.prefixes,$={}),e.separators&&(z.separators=e.separators,$={}),e.containers&&(z.containers=e.containers,$={}),typeof e.cache!==r&&(z.useCache=!!e.cache),typeof e.simple!==r){var t=z.useCache,n=z.force;z.simple=v(e.simple),z.simple?M():(V(),z.useCache=t,z.force=n),$={}}typeof e.force!==r&&(z.force=v(e.force)),N()},U.setCache=function(e){z.useCache=v(e)},U.setCacheOn=function(){z.useCache=!0},U.setCacheOff=function(){z.useCache=!1},U.setForce=function(e){z.force=v(e)},U.setForceOn=function(){z.force=!0},U.setForceOff=function(){z.force=!1},U.setSimple=function(e,t){var r=z.useCache,n=z.force;z.simple=v(e),z.simple?(M(t),N()):(V(),N(),z.useCache=r,z.force=n),$={}},U.setSimpleOn=function(e){z.simple=!0,M(e),N(),$={}},U.setSimpleOff=function(){var e=z.useCache,t=z.force;z.simple=!1,V(),N(),z.useCache=e,z.force=t,$={}},U.setSeparatorProperty=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setSeparatorProperty - invalid value\");if(e===t||z.separators[e]&&z.separators[e].exec!==c||z.prefixes[e]||z.containers[e])throw new Error(\"setSeparatorProperty - value already in use\");L(z.separators,c,e),N(),$={}},U.setSeparatorCollection=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setSeparatorCollection - invalid value\");if(e===t||z.separators[e]&&z.separators[e].exec!==l||z.prefixes[e]||z.containers[e])throw new Error(\"setSeparatorCollection - value already in use\");L(z.separators,l,e),N(),$={}},U.setPrefixParent=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setPrefixParent - invalid value\");if(e===t||z.prefixes[e]&&z.prefixes[e].exec!==o||z.separators[e]||z.containers[e])throw new Error(\"setPrefixParent - value already in use\");L(z.prefixes,o,e),N(),$={}},U.setPrefixRoot=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setPrefixRoot - invalid value\");if(e===t||z.prefixes[e]&&z.prefixes[e].exec!==s||z.separators[e]||z.containers[e])throw new Error(\"setPrefixRoot - value already in use\");L(z.prefixes,s,e),N(),$={}},U.setPrefixPlaceholder=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setPrefixPlaceholder - invalid value\");if(e===t||z.prefixes[e]&&z.prefixes[e].exec!==i||z.separators[e]||z.containers[e])throw new Error(\"setPrefixPlaceholder - value already in use\");L(z.prefixes,i,e),N(),$={}},U.setPrefixContext=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setPrefixContext - invalid value\");if(e===t||z.prefixes[e]&&z.prefixes[e].exec!==a||z.separators[e]||z.containers[e])throw new Error(\"setPrefixContext - value already in use\");L(z.prefixes,a,e),N(),$={}},U.setContainerProperty=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error(\"setContainerProperty - invalid value\");if(e===t||z.containers[e]&&z.containers[e].exec!==c||z.separators[e]||z.prefixes[e])throw new Error(\"setContainerProperty - value already in use\");L(z.containers,c,e,r),N(),$={}},U.setContainerSinglequote=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error(\"setContainerSinglequote - invalid value\");if(e===t||z.containers[e]&&z.containers[e].exec!==u||z.separators[e]||z.prefixes[e])throw new Error(\"setContainerSinglequote - value already in use\");L(z.containers,u,e,r),N(),$={}},U.setContainerDoublequote=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error(\"setContainerDoublequote - invalid value\");if(e===t||z.containers[e]&&z.containers[e].exec!==h||z.separators[e]||z.prefixes[e])throw new Error(\"setContainerDoublequote - value already in use\");L(z.containers,h,e,r),N(),$={}},U.setContainerCall=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error(\"setContainerCall - invalid value\");if(e===t||z.containers[e]&&z.containers[e].exec!==x||z.separators[e]||z.prefixes[e])throw new Error(\"setContainerCall - value already in use\");L(z.containers,x,e,r),N(),$={}},U.setContainerEvalProperty=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error(\"setContainerProperty - invalid value\");if(e===t||z.containers[e]&&z.containers[e].exec!==y||z.separators[e]||z.prefixes[e])throw new Error(\"setContainerEvalProperty - value already in use\");L(z.containers,y,e,r),N(),$={}},U.resetOptions=function(){V(),N(),$={}},V(),N(),m&&U.setOptions(m)};return m});"],"file":"index.js","sourceRoot":"/source/"}